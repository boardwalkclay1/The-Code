<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>The Code — Lessons Engine</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    /* ===== BASIC RESET ===== */
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #02040a;
      color: white;
    }

    .hidden { display: none; }

    /* ===== MATRIX LOADING SCREEN ===== */
    #loading-screen {
      position: fixed;
      inset: 0;
      background: black;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      overflow: hidden;
    }

    #loading-screen::before {
      content: "0101011001010011010010110100101100100101";
      position: absolute;
      inset: 0;
      font-family: monospace;
      font-size: 14px;
      line-height: 16px;
      color: rgba(0,255,140,0.25);
      animation: matrix-scroll 6s linear infinite;
      white-space: pre-wrap;
    }

    @keyframes matrix-scroll {
      0% { transform: translateY(-20%); }
      100% { transform: translateY(20%); }
    }

    .loading-center {
      text-align: center;
      z-index: 2;
    }

    .loading-center h1 {
      color: #00ff7f;
      font-size: 40px;
      letter-spacing: 0.2em;
      text-shadow: 0 0 15px #00ff7f;
      margin-bottom: 10px;
    }

    .loading-bar {
      width: 260px;
      height: 6px;
      background: rgba(0,255,140,0.15);
      border-radius: 999px;
      margin: 0 auto;
      overflow: hidden;
      border: 1px solid rgba(0,255,140,0.5);
    }

    .loading-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(to right, #00ff7f, #8bfdc7);
      box-shadow: 0 0 15px #00ff7f;
      transition: width 0.3s linear;
    }

    .loading-percent {
      margin-top: 8px;
      font-size: 12px;
      color: #9efad1;
      letter-spacing: 0.15em;
    }

    /* ===== MAIN CONTENT ===== */
    #app {
      padding: 40px;
      text-align: center;
    }

    .lesson-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }

    .lesson-card {
      background: #050816;
      padding: 20px;
      border-radius: 16px;
      border: 1px solid rgba(0,255,140,0.3);
      cursor: pointer;
      transition: 0.2s;
    }

    .lesson-card:hover {
      transform: scale(1.03);
      box-shadow: 0 0 20px rgba(0,255,140,0.4);
    }

    /* ===== MODAL ===== */
    #lesson-modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.75);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }

    .lesson-modal-content {
      width: 90%;
      max-width: 700px;
      background: #050816;
      border-radius: 20px;
      padding: 24px;
      border: 1px solid rgba(0,255,140,0.3);
      box-shadow: 0 0 40px rgba(0,255,140,0.4);
      position: relative;
    }

    .close-btn {
      position: absolute;
      top: 14px;
      right: 14px;
      background: transparent;
      border: none;
      color: #00ff7f;
      font-size: 22px;
      cursor: pointer;
    }

    .quiz-option {
      background: #0a1220;
      padding: 12px;
      border-radius: 10px;
      margin-top: 10px;
      cursor: pointer;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .quiz-option.correct {
      border-color: #00ff7f;
      background: rgba(0,255,140,0.2);
    }

    .quiz-option.wrong {
      border-color: #ff4f4f;
      background: rgba(255,0,0,0.2);
    }

    .complete-lesson-btn {
      margin-top: 20px;
      padding: 12px 20px;
      background: #00ff7f;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
      color: #02150a;
      display: block;
      width: 100%;
    }
  </style>
</head>

<body>

  <!-- MATRIX LOADING SCREEN -->
  <div id="loading-screen">
    <div class="loading-center">
      <h1>THE CODE</h1>
      <div class="loading-bar">
        <div class="loading-fill"></div>
      </div>
      <div class="loading-percent" id="loading-percent">0%</div>
    </div>
  </div>

  <!-- MAIN APP -->
  <div id="app" class="hidden">
    <h2>Lessons</h2>

    <div class="lesson-grid">
      <div class="lesson-card" data-lesson="1">Lesson 1</div>
      <div class="lesson-card" data-lesson="2">Lesson 2</div>
      <div class="lesson-card" data-lesson="3">Lesson 3</div>
    </div>
  </div>

  <!-- MODAL -->
  <div id="lesson-modal" class="hidden">
    <div class="lesson-modal-content">
      <button id="close-lesson-modal" class="close-btn">✕</button>
      <div id="lesson-modal-body"></div>
    </div>
  </div>

<script>
/* ============================
   MATRIX LOADING SCREEN
============================ */
const loadingScreen = document.getElementById("loading-screen");
const app = document.getElementById("app");
const loadingFill = document.querySelector(".loading-fill");
const loadingPercent = document.getElementById("loading-percent");

let progress = 0;
const interval = setInterval(() => {
  progress += Math.floor(Math.random() * 15) + 5;
  if (progress > 100) progress = 100;

  loadingFill.style.width = progress + "%";
  loadingPercent.textContent = progress + "%";

  if (progress >= 100) {
    clearInterval(interval);
    setTimeout(() => {
      loadingScreen.style.opacity = "0";
      loadingScreen.style.transition = "opacity 0.6s ease-out";
      setTimeout(() => {
        loadingScreen.style.display = "none";
        app.classList.remove("hidden");
      }, 600);
    }, 400);
  }
}, 300);


/* ============================
   LESSON ENGINE
============================ */
const lessonCards = document.querySelectorAll(".lesson-card");
const lessonModal = document.getElementById("lesson-modal");
const lessonModalBody = document.getElementById("lesson-modal-body");

let lessonProgress = JSON.parse(localStorage.getItem("codeLessonProgress")) || {
  1: false,
  2: false,
  3: false
};

const lessons = {
  1: {
    title: "Lesson 1: What is a Web Project?",
    content: `
      <p>A web project is made of three core files:</p>
      <ul>
        <li><strong>HTML</strong> — structure</li>
        <li><strong>CSS</strong> — style</li>
        <li><strong>JS</strong> — behavior</li>
      </ul>
    `,
    quiz: {
      question: "Which file controls structure?",
      options: [
        { text: "HTML", correct: true },
        { text: "CSS", correct: false },
        { text: "JavaScript", correct: false }
      ]
    }
  },

  2: {
    title: "Lesson 2: Folder Structure",
    content: `
      <pre><code>my-project/
  index.html
  styles/
    style.css
  scripts/
    app.js</code></pre>
    `,
    quiz: {
      question: "Where does style.css go?",
      options: [
        { text: "Root folder", correct: false },
        { text: "styles/", correct: true },
        { text: "scripts/", correct: false }
      ]
    }
  },

  3: {
    title: "Lesson 3: Linking Files",
    content: `
      <p>Link CSS in &lt;head&gt; and JS at bottom of &lt;body&gt;.</p>
    `,
    quiz: {
      question: "Where should app.js be linked?",
      options: [
        { text: "Inside &lt;head&gt;", correct: false },
        { text: "Bottom of &lt;body&gt;", correct: true },
        { text: "It doesn't need linking", correct: false }
      ]
    }
  }
};

function openLesson(id) {
  if (id > 1 && !lessonProgress[id - 1]) {
    alert("Complete the previous lesson first.");
    return;
  }

  const L = lessons[id];

  lessonModalBody.innerHTML = `
    <h2>${L.title}</h2>
    ${L.content}
    <h3>${L.quiz.question}</h3>
    ${L.quiz.options
      .map(o => `<div class="quiz-option" data-correct="${o.correct}">${o.text}</div>`)
      .join("")}
    <button class="complete-lesson-btn hidden" id="complete-lesson-btn">Mark Complete</button>
  `;

  lessonModal.classList.remove("hidden");

  const options = document.querySelectorAll(".quiz-option");
  const completeBtn = document.getElementById("complete-lesson-btn");

  options.forEach(opt => {
    opt.addEventListener("click", () => {
      const correct = opt.dataset.correct === "true";

      options.forEach(o => (o.style.pointerEvents = "none"));

      if (correct) {
        opt.classList.add("correct");
        completeBtn.classList.remove("hidden");
      } else {
        opt.classList.add("wrong");
      }
    });
  });

  completeBtn.addEventListener("click", () => {
    lessonProgress[id] = true;
    localStorage.setItem("codeLessonProgress", JSON.stringify(lessonProgress));
    lessonModal.classList.add("hidden");
  });
}

lessonCards.forEach(card => {
  card.addEventListener("click", () => {
    openLesson(Number(card.dataset.lesson));
  });
});

document.getElementById("close-lesson-modal").addEventListener("click", () => {
  lessonModal.classList.add("hidden");
});
</script>

</body>
</html>
